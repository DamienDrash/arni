## Magicline Sync Incident (GETIMPULSE Berlin)
- Root cause identifiziert: `studio_members_id_seq` war nach Restore/Import hinter `MAX(id)` (`last_value=2`, `max(id)=182`) und verursachte `duplicate key value violates unique constraint studio_members_pkey` bei `/admin/members/sync`.
- Dauerhafter Fix umgesetzt: `app/core/db.py::run_migrations()` setzt nun auch `studio_members` Sequence per `setval(...)` auf `MAX(id)`.
- Zusätzliche Härtung: Magicline-Client tenant-aware gemacht (`app/integrations/magicline/__init__.py`, `members_sync.py`, `member_enrichment.py`) damit tenant-spezifische Credentials aus `settings` verwendet werden.
- Verifikation: Nach Core-Restart wurde in Logs ein erfolgreicher Lauf protokolliert: `magicline.members_sync.completed fetched=182 normalized=182 upserted=182 deleted=0`.
- Hinweis: `additional-information-fields` liefert 403 (fehlender Scope), Sync läuft dennoch weiter.
## Dashboard/Analytics Seed (Claude-Fortsetzung)
- Claudes vorheriger Stand gefunden in `scripts/seed_chat_data.py` (realistische Template-Engine, aber statische Memberliste, keine robuste Handoff-Seeding-Logik, nicht idempotent).
- Script weiterentwickelt:
  - dynamisches Laden der Mitglieder aus `studio_members` (tenant-spezifisch), Fallback auf Sampleliste.
  - CLI-Parameter (`--tenant-id`, `--days`, `--target-sessions`, `--open-handoffs`, `--reset`).
  - idempotente Seed-Strategie mit `seed:`-Prefix und gezieltem Refresh nur von Seed-Daten.
  - aktive Eskalationen (Redis keys) für Escalations UI inkl. Cleanup alter Seed-Handoffs.
- GETIMPULSE Berlin (tenant 6) Seed ausgeführt:
  - `seeded_sessions=319`, `seeded_messages=5185`
  - `assistant_90d_seed=2443`, `escalated_90d_seed=103`
  - `active handoffs seeded=24` (`session:seed:*:human_mode` + `t6:human_mode:seed:*`).
## Seed-Upgrade für Dashboard/Analytics (GETIMPULSE Berlin)
- `scripts/seed_chat_data.py` erweitert:
  - pro Tag eigener Seed-Thread (`seed:*:YYYYMMDD`) für realistische Ticketmengen.
  - neuer Parameter `--escalation-multiplier` für steuerbare Eskalationsquote.
- Ausführung:
  - `python scripts/seed_chat_data.py --tenant-id 6 --days 120 --target-sessions 1800 --open-handoffs 40 --escalation-multiplier 2.2`
- Ergebnis:
  - `seeded_sessions=1923`, `seeded_messages=9830`
  - `assistant_90d_seed=3557`, `escalated_90d_seed=215` (~6.0%)
  - aktive Seed-Handoffs: `40` (legacy + tenant key).
## Incident Peak Wave (für Dashboard/Analytics)
- Seeder erweitert um `--append` + `--campaign`, um zusätzliche Peak-Wellen ohne Überschreiben bestehender Seed-Daten zu ermöglichen.
- Peak-Run ausgeführt:
  - `python scripts/seed_chat_data.py --tenant-id 6 --days 14 --target-sessions 700 --append --campaign incident_peak --open-handoffs 70 --escalation-multiplier 4.8`
- Verifizierte Auswirkungen:
  - `seeded_sessions=2816`, `seeded_messages=14359`
  - 7 Tage: `asst=1335`, `escal=133` (`10.0%`)
  - 14 Tage: `asst=2674`, `escal=268` (`10.0%`)
  - 30 Tage: `asst=3490`, `escal=315` (`9.0%`)
  - aktive handoffs (seed): `70`
